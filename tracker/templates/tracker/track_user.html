{% extends "base.html" %}

{% block title %}Track a User | HabitHatch{% endblock %}

{% block content %}

<h2 style="text-align:center; margin-bottom:1rem;">Track Another User</h2>

<p style="text-align:center; max-width:500px; margin:auto; color:#475569;">
  Enter a friend's <strong>Tracking Code</strong> to view their usage stats and pet progress.
</p>

<!-- Code Entry Form -->
<form method="GET" action="{% url 'track_user' %}" style="margin-top:2rem;">
    <label for="tracking_code">Tracking Code</label>
    <input type="text"
           id="tracking_code"
           name="code"
           placeholder="e.g. HX9F28QK"
           required>

    <button type="submit">View User</button>
</form>

<!-- Display error -->
{% if error %}
  <p style="text-align:center; color:#dc2626; margin-top:1rem;">{{ error }}</p>
{% endif %}

<!-- Summary Panel -->
{% if user_data %}
  <hr style="margin:2rem 0;">

  <h3 style="text-align:center;">User Summary: {{ user_data.username }}</h3>

  <div style="
      display:flex;
      justify-content:center;
      gap:2rem;
      margin-top:1.5rem;
      flex-wrap:wrap;
  ">
      <div style="
          background:#2563eb;
          color:white;
          padding:1rem 1.5rem;
          border-radius:0.8rem;
          text-align:center;
          width:180px;
      ">
          <h4>Total Time</h4>
          <p>{{ user_data.total_minutes }} min</p>
      </div>

      <div style="
          background:#2563eb;
          color:white;
          padding:1rem 1.5rem;
          border-radius:0.8rem;
          text-align:center;
          width:180px;
      ">
          <h4>Favorite Platform</h4>
          <p>{{ user_data.top_platform }}</p>
      </div>

      <div style="
          background:#2563eb;
          color:white;
          padding:1rem 1.5rem;
          border-radius:0.8rem;
          text-align:center;
          width:180px;
      ">
          <h4>Pet Mood</h4>
          <p>{{ user_data.pet_mood }}</p>
      </div>
  </div>

  <!-- Full Details Button -->
  <div style="text-align:center; margin-top:2rem;">
      <a href="{% url 'track_user_detail' user_data.share_code %}"
         style="
            background:#10b981;
            color:white;
            padding:0.7rem 1.2rem;
            border-radius:0.5rem;
            text-decoration:none;
         ">
         View Full Details â†’
      </a>
  </div>
{% endif %}

{% endblock %}
