{% extends "base.html" %}

{% block title %}Resources | HabitHatch{% endblock %}

{% block content %}
  <h2 style="text-align:center; margin-bottom:1rem;">Resources</h2>
<div class="resource-box" id="recommended">
  <h3>Recommended</h3>
  <p id="recText">Our newest curated resource to help with habit building and focus.</p>
  <button class="rec-btn" id="recBtn">Add Info</button>
</div>
  <div class="resources-container">

    <!-- ==== TABLE OF CONTENTS ==== -->
    <div id="toc" class="toc-card">
      <h3>Table of Contents</h3>
      <div class="toc-grid">
        <a href="#source1">Tiktok</a>
        <a href="#source2">YouTube</a>
        <a href="#source3">Instagram</a>
        <a href="#source4">Facebook</a>
        <a href="#source5">General Media</a>
        <a href="#source6">Phone Addiction</a>
        <a href="#source7">Streaming Addiction</a>
        <a href="#source8">Video Games</a>
        <a href="#source9">Shopping</a>
        <a href="#source10">Gambling</a>
        <a href="#source11">Food Addiction</a>
        <a href="#source12">Caffeine Addiction</a>
        <a href="#source13">Nicotine Addiction</a>
        <a href="#source14">Alcohol Addiction</a>
        <a href="#source15">Dopamine Addiction</a>
        <a href="#source16">Drug Addiction</a>
      </div>
    </div>

    <!-- ==== RESOURCE SECTIONS ==== -->
    <div id="source1" class="resource-box"><h3>Tiktok Help</h3>
      <p><b>‚ÄúHow to Stop Scrolling on TikTok and Reclaim Your Time‚Äù by Kai Cox</b><br><br>
        This article explains why TikTok‚Äôs design fuels addictive scrolling and offers simple ways to regain
        control‚Äîlike setting limits, adding friction, and replacing screen time with more rewarding real-life
        activities.</p>
      <p><a href="https://endscreenaddiction.com/blog/how-to-stop-scrolling-on-tiktok-and-reclaim-your-time/">
        <b>endscreenaddiction.com</b></a></p><a href="#toc" class="back-to-top">ü°†</a></div>
    <div id="source2" class="resource-box"><h3>YouTube Help</h3>
      <p><b>‚ÄúWhat Is YouTube Addiction?‚Äù by Kendra Cherry</b><br><br>
        This article explains how excessive YouTube use can become a behavioral addiction that disrupts daily life.
        It covers signs, causes, and impacts of overuse, noting that while not officially recognized as a disorder,
        it shares traits with other compulsive behaviors. Cherry also offers strategies for managing screen habits,
        like setting limits, disabling autoplay, and seeking professional help if needed.</p>
      <p><a href="https://www.verywellmind.com/youtube-addiction-signs-causes-effects-and-treatment-5222236">
        <b>verywellmind.com</b></a></p><a href="#toc" class="back-to-top">ü°†</a></div>
    <div id="source3" class="resource-box"><h3>Instagram Help</h3>
      <p><b>‚ÄúHow to Disable Reels on Instagram: Easy Methods That Work‚Äù by Tanish Bhadwal</b><br><br>
        This guide explains practical ways to reduce or avoid Instagram Reels, even though the app doesn‚Äôt offer an
        official disable option. It suggests methods like marking Reels as ‚ÄúNot Interested,‚Äù using the browser version,
        muting Reel-heavy accounts, or installing older app versions to create a calmer, photo-focused experience.</p>
      <p><a href="https://www.asclique.com/blog/how-to-disable-reels-on-instagram/"><b>asclique.com</b></a></p>
      <a href="#toc" class="back-to-top">ü°†</a></div>
    <div id="source4" class="resource-box"><h3>Facebook Help</h3>
      <p><b>‚ÄúHow to Quit Reels Forever‚Äù by WallHabit</b><br><br>
        This article explains how to stop watching short-form videos like Facebook Reels for good. It offers practical
        tips such as setting boundaries, turning off autoplay, tracking screen time, and using the WallHabit app to
        block or limit distractions. The focus is on building mindfulness, replacing scrolling with meaningful
        activities, and regaining control over your time and attention.</p>
      <p><a href="https://wallhabit.com/blog/how-to-quit-reels-forever/"><b>wallhabit.com</b></a></p>
      <a href="#toc" class="back-to-top">ü°†</a></div>
    <div id="source5" class="resource-box"><h3>General Short Form Media Help</h3>
      <p><b>‚ÄúEscaping Short-Form Addiction‚Äù by Dr. Shin</b><br><br>
        This article discusses the growing problem of short-form video addiction on platforms like TikTok, YouTube
        Shorts, and Instagram Reels. Dr. Shin emphasizes moderation over total avoidance and offers strategies such as
        setting time limits, avoiding videos before bed, and choosing longer, more meaningful content to prevent
        dopamine-driven overuse and protect focus and well-being.</p>
      <p><a href="https://shinseungkeon.com/en/escaping-short-form-addiction/"><b>shinseungkeon.com</b></a></p>
      <a href="#toc" class="back-to-top">ü°†</a></div>
    <div id="source6" class="resource-box"><h3>Phone Addiction Help</h3><p>Add info here.</p><a href="#toc" class="back-to-top">ü°†</a></div>
    <div id="source7" class="resource-box"><h3>Streaming Addiction Help</h3><p>Add info here.</p><a href="#toc" class="back-to-top">ü°†</a></div>
    <div id="source8" class="resource-box"><h3>Video Game Addiction Help</h3><p>Add info here.</p><a href="#toc" class="back-to-top">ü°†</a></div>
    <div id="source9" class="resource-box"><h3>Shopping Addiction Help</h3><p>Add info here.</p><a href="#toc" class="back-to-top">ü°†</a></div>
    <div id="source10" class="resource-box"><h3>Gambling Addiction Help</h3><p>Add info here.</p><a href="#toc" class="back-to-top">ü°†</a></div>
    <div id="source11" class="resource-box"><h3>Food Addiction Help</h3><p>Add info here.</p><a href="#toc" class="back-to-top">ü°†</a></div>
    <div id="source12" class="resource-box"><h3>Caffeine Addiction Help</h3><p>Add info here.</p><a href="#toc" class="back-to-top">ü°†</a></div>
    <div id="source13" class="resource-box"><h3>Nicotine Addiction Help</h3><p>Add info here.</p><a href="#toc" class="back-to-top">ü°†</a></div>
    <div id="source14" class="resource-box"><h3>Alcohol Addiction Help</h3><p>Add info here.</p><a href="#toc" class="back-to-top">ü°†</a></div>
    <div id="source15" class="resource-box"><h3>Dopamine Addiction Help</h3><p>Add info here.</p><a href="#toc" class="back-to-top">ü°†</a></div>
    <div id="source16" class="resource-box"><h3>Drug Addiction Help</h3><p>Add info here.</p><a href="#toc" class="back-to-top">ü°†</a></div>
  </div>

  <style>
    body {
      background-color: #f5f5f5;
      margin: 0;
      padding: 0;
    }

    .rec-btn {
    transition: background-color 0.3s ease, transform 0.2s ease;
    }

    .rec-btn:hover {
    transform: translateY(-2px);
    }

    .resources-container {
      max-width: 900px;
      margin: 2rem auto;
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }

    /* ==== TOC CARD ==== */
    .toc-card {
      background: white;
      border-radius: 1rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      padding: 1.5rem;
      text-align: center;
    }

    .toc-card h3 {
      color: #2563EB;
      margin-bottom: 1rem;
    }

    .toc-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
      justify-items: center;
    }

    .toc-grid a {
      background-color: #2563eb;
      color: white;
      text-decoration: none;
      padding: 0.5rem 0;
      border-radius: 8px;
      width: 100%;
      font-weight: 500;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }

    .toc-grid a:hover {
      background-color: #1e40af;
      transform: translateY(-2px);
    }

    .toc-grid a.active-btn {
      background-color: #D9E5FF !important;
      color: black !important;
    }

    /* ==== RESOURCE BOX ==== */
    .resource-box {
      background: white;
      border-radius: 1rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      padding: 1rem 1.5rem;
      scroll-margin-top: 30px;
      transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.8s ease;
    }

    .resource-box:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }

    .resource-box.active {
      background-color: black;
      color: white;
    }

    .resource-box.active h3 {
      color: white;
    }

    .resource-box.active .back-to-top {
      background-color: white;
      color: black;
    }

    .resource-box h3 {
      color: #2563eb;
      border-bottom: 2px solid #e2e8f0;
      padding-bottom: 8px;
      margin-bottom: 10px;
    }

    .back-to-top {
      display: inline-block;
      margin-top: 10px;
      font-size: 20px;
      color: white;
      background-color: #2563eb;
      padding: 0px 20px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 500;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }

    .back-to-top:hover {
      background-color: #1e40af;
      transform: translateY(-1px);
    }
  </style>

<script>
  let x = "{{most_used}}";
  const button = document.getElementById("recBtn");
  const text = document.getElementById("recText");
  text.style.fontWeight = "bold";
  const section = document.getElementById("recommended");

  if ("{{all_equal}}" === "True" || x === "Other") {
    button.textContent = "General Short Form Media Help";
    button.onclick = () => window.location.href = "https://shinseungkeon.com/en/escaping-short-form-addiction/";
    text.textContent = "‚ÄúEscaping Short-Form Addiction‚Äù by Dr. Shin";
    }
  else if (x === "TikTok") {
    button.textContent = "TikTok Help";
    button.onclick = () => window.location.href = "https://endscreenaddiction.com/blog/how-to-stop-scrolling-on-tiktok-and-reclaim-your-time/";
    text.textContent = "‚ÄúHow to Stop Scrolling on TikTok and Reclaim Your Time‚Äù by Kai Cox";
  }
  else if (x === "YouTube Shorts") {
    button.textContent = "YouTube Help";
    button.onclick = () => window.location.href = "https://www.verywellmind.com/youtube-addiction-signs-causes-effects-and-treatment-5222236";
    text.textContent = "‚ÄúWhat Is YouTube Addiction?‚Äù by Kendra Cherry";
  }
  else if (x === "Instagram Reels") {
    button.textContent = "Instagram Help";
    button.onclick = () => window.location.href = "https://www.asclique.com/blog/how-to-disable-reels-on-instagram/";
    text.textContent = "‚ÄúHow to Disable Reels on Instagram: Easy Methods That Work‚Äù by Tanish Bhadwal";
  }
  else if (x === "Facebook Reels") {
    button.textContent = "Facebook Reels Help";
    button.onclick = () => window.location.href = "https://wallhabit.com/blog/how-to-quit-reels-forever/";
    text.textContent = "‚ÄúHow to Quit Reels Forever‚Äù by WallHabit";
  }
  else {
    section.style.display = "none";
  }

  const tocLinks = document.querySelectorAll('.toc-grid a');
  const backButtons = document.querySelectorAll('.back-to-top');
  const boxes = document.querySelectorAll('.resource-box');

  // === CUSTOMIZATION OPTIONS ===
  const scrollSettings = {
    duration: 750,          // scroll duration in ms
    delay: 100,             // time before highlighting box (ms)
    activeDuration: 2000    // how long box stays highlighted (ms)
  };

  // === CUSTOM SMOOTH SCROLL FUNCTION (with easing) ===
  function smoothScrollTo(targetY, duration) {
    const startY = window.scrollY;
    const distance = targetY - startY;
    let startTime = null;

    function animation(currentTime) {
      if (!startTime) startTime = currentTime;
      const elapsed = currentTime - startTime;
      const progress = Math.min(elapsed / duration, 1);

      // smoother ease-in-out curve
      const ease = progress < 0.5
        ? 4 * progress * progress * progress
        : 1 - Math.pow(-2 * progress + 2, 3) / 2;

      window.scrollTo(0, startY + distance * ease);

      if (elapsed < duration) requestAnimationFrame(animation);
    }

    requestAnimationFrame(animation);
  }

  // === HELPER TO HANDLE SCROLL + HIGHLIGHT ===
  function handleSmoothScroll(event, link, highlight = false) {
    event.preventDefault();
    const targetId = link.getAttribute('href').substring(1);
    const targetBox = document.getElementById(targetId);
    if (!targetBox) return;

    let offset = highlight ? 25 : 20; // smaller number = closer to top
    const targetY = targetBox.getBoundingClientRect().top + window.scrollY - offset;
    smoothScrollTo(targetY, scrollSettings.duration);

    if (highlight) {
      // clear existing highlights
      boxes.forEach(box => box.classList.remove('active'));
      tocLinks.forEach(l => l.classList.remove('active-btn'));

      // add highlight
      setTimeout(() => {
        targetBox.classList.add('active');
        setTimeout(() => targetBox.classList.remove('active'), scrollSettings.activeDuration);
      }, scrollSettings.delay);

      // temporary active button color
      link.classList.add('active-btn');
      setTimeout(() => link.classList.remove('active-btn'), 60000);
    }
  }

  // === TOC LINKS (scroll to source) ===
  tocLinks.forEach(link => {
    link.addEventListener('click', (event) => {
      handleSmoothScroll(event, link, true);
    });
  });

  // === BACK BUTTONS (scroll to top / TOC) ===
  backButtons.forEach(btn => {
    btn.addEventListener('click', (event) => {
      handleSmoothScroll(event, btn, false);
    });
  });
</script>

{% endblock %}
